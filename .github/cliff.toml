# git-cliff ~ è¨­å®šæª”
# https://git-cliff.org/docs/configuration


[changelog]
# ç”¨æ–¼æ¯å€‹ç™¼å¸ƒç‰ˆæœ¬æ¸²æŸ“çš„ Tera æ¨¡æ¿
# åƒè¦‹ https://keats.github.io/tera/docs/#introduction
body = """
{% if version %}\
    ## {{ version | trim_start_matches(pat="v") }} ({{ timestamp | date(format="%Y-%m-%d") }})
{% else %}\
    ## [æœªç™¼å¸ƒ]
{% endif %}\
{% for group, commits in commits | group_by(attribute="group") %}
    ### {{ group | striptags | trim | upper_first }}
    {% for commit in commits %}
        - {% if commit.scope %}*({{ commit.scope }})* {% endif %}\
            {% if commit.breaking %}[**é‡å¤§è®Šæ›´**] {% endif %}\
            {{ commit.message | upper_first }} @{{ commit.author.name }}\
    {% endfor %}
{% endfor %}
"""
# ç§»é™¤è®Šæ›´æ—¥èªŒå…§å®¹ä¸­çš„å‰å¾Œç©ºç™½
trim = true
# å³ä½¿æ²’æœ‰ç™¼å¸ƒç‰ˆæœ¬è¦è™•ç†ä¹Ÿæ¸²æŸ“å…§å®¹
render_always = true
# åŸºæ–¼æ­£å‰‡è¡¨é”å¼çš„å¾Œè™•ç†å™¨é™£åˆ—ï¼Œç”¨æ–¼ä¿®æ”¹è®Šæ›´æ—¥èªŒ
postprocessors = [
    # å°‡ä½”ä½ç¬¦ <REPO> æ›¿æ›ç‚º URL
    #{ pattern = '<REPO>', replace = "https://github.com/orhun/git-cliff" },
]
# å³ä½¿æ²’æœ‰ç™¼å¸ƒç‰ˆæœ¬è¦è™•ç†ä¹Ÿæ¸²æŸ“å…§å®¹
# render_always = true
# è¼¸å‡ºæª”æ¡ˆè·¯å¾‘
# output = "test.md"

[git]
# æ ¹æ“šå‚³çµ±æäº¤è¦ç¯„è§£ææäº¤
# åƒè¦‹ https://www.conventionalcommits.org
conventional_commits = true
# æ’é™¤ä¸ç¬¦åˆå‚³çµ±æäº¤è¦ç¯„çš„æäº¤
filter_unconventional = false
# è¦æ±‚æ‰€æœ‰æäº¤éƒ½ç¬¦åˆå‚³çµ±è¦ç¯„
# å„ªå…ˆæ–¼ filter_unconventional
require_conventional = false
# åœ¨æ›è¡Œç¬¦è™•åˆ†å‰²æäº¤ï¼Œå°‡æ¯ä¸€è¡Œè¦–ç‚ºå–®ç¨çš„æäº¤
split_commits = true
# åŸºæ–¼æ­£å‰‡è¡¨é”å¼çš„è§£æå™¨é™£åˆ—ï¼Œç”¨æ–¼åœ¨é€²ä¸€æ­¥è™•ç†ä¹‹å‰ä¿®æ”¹æäº¤è¨Šæ¯
commit_preprocessors = [
    # å°‡å•é¡Œç·¨è™Ÿæ›¿æ›ç‚ºé€£çµæ¨¡æ¿ï¼Œä»¥ä¾¿åœ¨ `changelog.postprocessors` ä¸­æ›´æ–°
    #{ pattern = '\((\w+\s)?#([0-9]+)\)', replace = "([#${2}](<REPO>/issues/${2}))"},
    # ä½¿ç”¨ https://github.com/crate-ci/typos æª¢æŸ¥æäº¤è¨Šæ¯çš„æ‹¼å¯«
    # å¦‚æœæ‹¼å¯«ä¸æ­£ç¢ºï¼Œå°‡è‡ªå‹•ä¿®æ­£
    #{ pattern = '.*', replace_command = 'typos --write-changes -' },
]
# é˜²æ­¢é‡å¤§è®Šæ›´çš„æäº¤è¢«æäº¤è§£æå™¨æ’é™¤
protect_breaking_commits = false
# åŸºæ–¼æ­£å‰‡è¡¨é”å¼çš„è§£æå™¨é™£åˆ—ï¼Œç”¨æ–¼å¾æäº¤è¨Šæ¯ä¸­æå–è³‡æ–™
# å°‡æäº¤åˆ†é…åˆ°ç¾¤çµ„
# å¯é¸åœ°è¨­å®šæäº¤çš„ç¯„åœï¼Œä¸¦å¯æ±ºå®šå¾é€²ä¸€æ­¥è™•ç†ä¸­æ’é™¤æäº¤
commit_parsers = [
    { message = "^feat", group = "<!-- 0 -->ğŸš€ æ–°åŠŸèƒ½" },
    { message = "^fix", group = "<!-- 1 -->ğŸ› éŒ¯èª¤ä¿®å¾©" },
    { message = "^doc", group = "<!-- 3 -->ğŸ“š æ–‡ä»¶" },
    { message = "^perf", group = "<!-- 4 -->âš¡ æ•ˆèƒ½" },
    { message = "^refactor", group = "<!-- 2 -->ğŸšœ é‡æ§‹" },
    { message = "^style", group = "<!-- 5 -->ğŸ¨ æ¨£å¼" },
    { message = "^test", group = "<!-- 6 -->ğŸ§ª æ¸¬è©¦" },
    { message = "^chore\\(release\\): prepare for", skip = true },
    { message = "^chore\\(deps.*\\)", skip = true },
    { message = "^chore\\(pr\\)", skip = true },
    { message = "^chore\\(pull\\)", skip = true },
    { message = "^chore|^ci", group = "<!-- 7 -->âš™ï¸ é›œé …ä»»å‹™" },
    { body = ".*security", group = "<!-- 8 -->ğŸ›¡ï¸ å®‰å…¨æ€§" },
    { message = "^revert", group = "<!-- 9 -->â—€ï¸ é‚„åŸ" },
    { message = ".*", group = "<!-- 10 -->ğŸ’¼ å…¶ä»–" },
]
# æ’é™¤æœªè¢«ä»»ä½•æäº¤è§£æå™¨åŒ¹é…çš„æäº¤
filter_commits = false
# é€£çµè§£æå™¨é™£åˆ—ï¼Œç”¨æ–¼æå–å¤–éƒ¨åƒè€ƒä¸¦ä½¿ç”¨æ­£å‰‡è¡¨é”å¼å°‡å…¶è½‰æ›ç‚º URL
link_parsers = []
# åƒ…åŒ…å«å±¬æ–¼ç•¶å‰åˆ†æ”¯çš„æ¨™ç±¤
use_branch_tags = false
# ä»¥æ‹“æ’²é †åºè€Œéæ™‚é–“é †åºæ’åˆ—ç™¼å¸ƒç‰ˆæœ¬
topo_order = false
# ä»¥æ‹“æ’²é †åºè€Œéæ™‚é–“é †åºæ’åˆ—ç™¼å¸ƒç‰ˆæœ¬
topo_order_commits = true
# è®Šæ›´æ—¥èªŒä¸­æ¯å€‹ç¾¤çµ„/ç™¼å¸ƒç‰ˆæœ¬å…§çš„æäº¤é †åº
# å…è¨±å€¼ï¼šnewestï¼ˆæœ€æ–°ï¼‰ã€oldestï¼ˆæœ€èˆŠï¼‰
sort_commits = "oldest"
# è™•ç†å­æ¨¡çµ„æäº¤
recurse_submodules = false
